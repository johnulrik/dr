{\rtf1\ansi\ansicpg1252\cocoartf1404\cocoasubrtf470
{\fonttbl\f0\froman\fcharset0 Times-Roman;\f1\fmodern\fcharset0 Courier;}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;}
\paperw11900\paperh16840\margl1440\margr1440\vieww10800\viewh8400\viewkind0
\deftab720
\pard\pardeftab720\sl280\partightenfactor0

\f0\fs24 \cf2 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\
\
\
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2 <?php\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2 class Path\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2 \{\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2     public $currentPath;\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2     \
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2     function __construct($path)\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2     \{\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2         $this->currentPath = $path;\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2     \}\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2 \uc0\u8203 \
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2     public function cd($newPath)\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2     \{\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2 \uc0\u8203 \
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2         $newPathEploded = explode('/',$newPath);\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2         $oldPath = explode('/', $this->currentPath);\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2         if(preg_match('/[^a-zA-Z\\/\\.]$/', $newPath)) \{\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2             echo "Cannot switch to new path ".$newPath;\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2             return $oldPath;\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2         \}\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2         \
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2         foreach($newPathEploded as $pathElement) \{\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2             switch($pathElement) \{\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2                 case '..':\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2                     array_pop($oldPath);\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2                     break;\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2                 case '.':\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2                     break;\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2                 default:\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2                     array_push($oldPath, $pathElement);\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2                     break;\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2                 \
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2             \}\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2         \}\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2         $this->currentPath = join('/', $oldPath);\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2         return $this;\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2     \}\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2 \}\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2 \uc0\u8203 \
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2 $path = new Path('/a/b/c/d');\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\pard\pardeftab720\sl280\partightenfactor0

\f1 \cf2 echo $path->cd('../x/')->currentPath;\
\pard\pardeftab720\sl280\partightenfactor0

\f0 \cf2 \
\
\
}